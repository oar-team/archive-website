<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>OAR-DOCUMENTATION-API</title>

<link rel="icon" href="../../../../../favicon.ico" type="image/x-icon" />

<link rel="stylesheet" href="../../../../../style.css" type="text/css" />

<link rel="stylesheet" href="../../../../../local.css" type="text/css" />





</head>
<body>

<div class="page">

<div class="pageheader">
<div class="header">
<span>
<span class="parentlinks">

<a href="../../../../../">OAR</a>/ 

<a href="../../../../../">sources</a>/ 

<a href="../../../../../">2.4</a>/ 

<a href="../../../../../">Docs</a>/ 

<a href="../../../../../">documentation</a>/ 

</span>
<span class="title">
OAR-DOCUMENTATION-API

</span>
</span>

<form method="get" action="http://oar.imag.fr//ikiwiki.cgi" id="searchform">
<div>
<input type="text" id="searchbox" name="P" value="" size="16"
 />
</div>
</form>


</div>





</div>


<div class="sidebar">
<ul>
<li><strong><a href="../../../../../">Home</a></strong></li>
<li><strong><a href="../../../../../about/">About</a></strong></li>
<li><strong><a href="../../../../../news/">News</a></strong></li>
<li><strong><a href="http://oar.imag.fr/archive/wiki-oar">Wiki</a></strong></li>
<li><strong>Getting OAR</strong>
<ul>
<li><a href="../../../../../repositories/">Repositories</a></li>
<li><a href="../../../../../installation/">Installation</a></li>
<li><a href="../../../../../changelog/">Changelog</a></li>
</ul></li>
<li><strong>Using OAR</strong>
<ul>
<li><a href="../../../../../user-quickstart/">First user steps</a></li>
<li><a href="../../../../../user-usecases/">Use cases</a></li>
<li><a href="../../../../../faq/">FAQ</a></li>
</ul></li>
<li><strong>Getting help</strong>
<ul>
<li><a href="../../../../../support/">Contact/Mailing lists</a></li>
<li><a href="../../../../../documentation/">Documentation</a></li>
</ul></li>
<li><strong>Contributing to OAR</strong>
<ul>
<li><a href="../../../../../contributing/repositories/">Source repositories</a></li>
<li><a href="../../../../../contributing/workflow/">Workflow</a></li>
<li><a href="../../../../../contributing/GSOCs/">GSOCs</a></li>
</ul></li>
<li><strong><a href="../../../../../research/">Researchers' Corner</a></strong></li>
<li><strong><a href="../../../../../partners-projects/">Partners &amp; Projects</a></strong></li>
</ul>

</div>


<div id="pagebody">

<div id="content">






OAR Documentation - REST API



<div class="document" id="oar-documentation-rest-api">
<h1 class="title">OAR Documentation - REST API</h1>

<div class="dedication topic">
<p class="topic-title first">Dedication</p>
<p>For users whishing to make programs interfaced with OAR</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Abstract:</th><td class="field-body">OAR is a resource manager (or batch scheduler) for large clusters. By it's
functionnalities, it's near of PBS, LSF, CCS and Condor. It's suitable for
productive plateforms and research experiments.</td>
</tr>
</tbody>
</table>
<p><strong>BE CAREFULL : THIS DOCUMENTATION IS FOR OAR &gt;= 2.4.0</strong></p>
<p>PDF version : <a class="reference external" href="OAR-DOCUMENTATION-API.pdf">OAR-DOCUMENTATION-API.pdf</a></p>
<div class="contents topic" id="table-of-contents">
<p class="topic-title first">Table of Contents</p>
<ul class="auto-toc simple">
<li><a class="reference internal" href="#introduction" id="id1">1&nbsp;&nbsp;&nbsp;Introduction</a></li>
<li><a class="reference internal" href="#concepts" id="id2">2&nbsp;&nbsp;&nbsp;Concepts</a><ul class="auto-toc">
<li><a class="reference internal" href="#access" id="id3">2.1&nbsp;&nbsp;&nbsp;Access</a></li>
<li><a class="reference internal" href="#authentication" id="id4">2.2&nbsp;&nbsp;&nbsp;Authentication</a></li>
<li><a class="reference internal" href="#data-structures-and-formats" id="id5">2.3&nbsp;&nbsp;&nbsp;Data structures and formats</a></li>
<li><a class="reference internal" href="#errors-and-debug" id="id6">2.4&nbsp;&nbsp;&nbsp;Errors and debug</a></li>
</ul>
</li>
<li><a class="reference internal" href="#ruby-rest-client" id="id7">3&nbsp;&nbsp;&nbsp;Ruby REST client</a></li>
<li><a class="reference internal" href="#rest-requests-description" id="id8">4&nbsp;&nbsp;&nbsp;REST requests description</a><ul class="auto-toc">
<li><a class="reference internal" href="#get-index" id="id9">4.1&nbsp;&nbsp;&nbsp;GET /index</a></li>
<li><a class="reference internal" href="#get-version" id="id10">4.2&nbsp;&nbsp;&nbsp;GET /version</a></li>
<li><a class="reference internal" href="#get-timezone" id="id11">4.3&nbsp;&nbsp;&nbsp;GET /timezone</a></li>
<li><a class="reference internal" href="#get-jobs" id="id12">4.4&nbsp;&nbsp;&nbsp;GET /jobs</a></li>
<li><a class="reference internal" href="#get-jobs-details" id="id13">4.5&nbsp;&nbsp;&nbsp;GET /jobs/details</a></li>
<li><a class="reference internal" href="#get-jobs-table" id="id14">4.6&nbsp;&nbsp;&nbsp;GET /jobs/table</a></li>
<li><a class="reference internal" href="#get-jobs-id" id="id15">4.7&nbsp;&nbsp;&nbsp;GET /jobs/&lt;id&gt;</a></li>
<li><a class="reference internal" href="#get-jobs-id-resources" id="id16">4.8&nbsp;&nbsp;&nbsp;GET /jobs/&lt;id&gt;/resources</a></li>
<li><a class="reference internal" href="#post-jobs-id-deletions-new" id="id17">4.9&nbsp;&nbsp;&nbsp;POST /jobs/&lt;id&gt;/deletions/new</a></li>
<li><a class="reference internal" href="#post-jobs-id-checkpoints-new" id="id18">4.10&nbsp;&nbsp;&nbsp;POST /jobs/&lt;id&gt;/checkpoints/new</a></li>
<li><a class="reference internal" href="#post-jobs-id-holds-new" id="id19">4.11&nbsp;&nbsp;&nbsp;POST /jobs/&lt;id&gt;/holds/new</a></li>
<li><a class="reference internal" href="#post-jobs-id-rholds-new" id="id20">4.12&nbsp;&nbsp;&nbsp;POST /jobs/&lt;id&gt;/rholds/new</a></li>
<li><a class="reference internal" href="#post-jobs-id-resumptions-new" id="id21">4.13&nbsp;&nbsp;&nbsp;POST /jobs/&lt;id&gt;/resumptions/new</a></li>
<li><a class="reference internal" href="#post-jobs-id-signals-signal" id="id22">4.14&nbsp;&nbsp;&nbsp;POST /jobs/&lt;id&gt;/signals/&lt;signal&gt;</a></li>
<li><a class="reference internal" href="#post-jobs" id="id23">4.15&nbsp;&nbsp;&nbsp;POST /jobs</a></li>
<li><a class="reference internal" href="#post-jobs-id" id="id24">4.16&nbsp;&nbsp;&nbsp;POST /jobs/&lt;id&gt;</a></li>
<li><a class="reference internal" href="#delete-jobs-id" id="id25">4.17&nbsp;&nbsp;&nbsp;DELETE /jobs/&lt;id&gt;</a></li>
<li><a class="reference internal" href="#get-jobs-form" id="id26">4.18&nbsp;&nbsp;&nbsp;GET /jobs/form</a></li>
<li><a class="reference internal" href="#get-resources" id="id27">4.19&nbsp;&nbsp;&nbsp;GET /resources</a></li>
<li><a class="reference internal" href="#get-resources-full" id="id28">4.20&nbsp;&nbsp;&nbsp;GET /resources/full</a></li>
<li><a class="reference internal" href="#get-resources-id" id="id29">4.21&nbsp;&nbsp;&nbsp;GET /resources/&lt;id&gt;</a></li>
<li><a class="reference internal" href="#get-resources-nodes-network-address" id="id30">4.22&nbsp;&nbsp;&nbsp;GET /resources/nodes/&lt;network_address&gt;</a></li>
<li><a class="reference internal" href="#post-resources" id="id31">4.23&nbsp;&nbsp;&nbsp;POST /resources</a></li>
<li><a class="reference internal" href="#post-resources-id-state" id="id32">4.24&nbsp;&nbsp;&nbsp;POST /resources/&lt;id&gt;/state</a></li>
<li><a class="reference internal" href="#delete-resources-id" id="id33">4.25&nbsp;&nbsp;&nbsp;DELETE /resources/&lt;id&gt;</a></li>
<li><a class="reference internal" href="#delete-resources-node-cpuset-id" id="id34">4.26&nbsp;&nbsp;&nbsp;DELETE /resources/&lt;node&gt;/&lt;cpuset_id&gt;</a></li>
</ul>
</li>
<li><a class="reference internal" href="#some-equivalences-with-oar-command-line" id="id35">5&nbsp;&nbsp;&nbsp;Some equivalences with oar command line</a></li>
</ul>
</div>
<hr class="docutils" />
<div class="section" id="introduction">
<h1><a class="toc-backref" href="#id1">1&nbsp;&nbsp;&nbsp;Introduction</a></h1>
<p>The OAR REST API is currently a cgi script being served by an http server (we recommend Apache) that allows the programming of interfaces to OAR using a REST library. Most of the operations usually done with the oar Unix commands may be done using this API from your favourite language.</p>
</div>
<div class="section" id="concepts">
<h1><a class="toc-backref" href="#id2">2&nbsp;&nbsp;&nbsp;Concepts</a></h1>
<div class="section" id="access">
<h2><a class="toc-backref" href="#id3">2.1&nbsp;&nbsp;&nbsp;Access</a></h2>
<p>A simple GET query to the API using wget may look like this:</p>
<pre class="literal-block">
# Get the list of resources
wget -O - http://www.mydomain.org/oarapi/resources.yaml?structure=simple
</pre>
<p>You can also access to the API using a browser. Make it point to <a class="reference external" href="http://www.myoarcluster.local/oarapi/index.html">http://www.myoarcluster.local/oarapi/index.html</a> and you'll see a very simple HTML interface allowing you to browse the cluster resources and even post a job using a form. (of course, replace www.myoarcluster.local by a valid name allowing you to join the http service of the host where you installed the oar api)</p>
<p>But generally, you'll use a REST client or a REST library provided for your favorite language. You'll see examples using a ruby rest library in the next parts of this document.</p>
</div>
<div class="section" id="authentication">
<h2><a class="toc-backref" href="#id4">2.2&nbsp;&nbsp;&nbsp;Authentication</a></h2>
<ul>
<li><p class="first"><strong>Set-up</strong>:</p>
<p>The API authentication relies on the authentication mechanism of the http server used to serve the CGI script.
The API may be configured to use the IDENT protocol for authentication from trusted hosts, like a cluster frontend. In this case, a unix login is automatically used by the API. This only works for hosts that have been correctly configured (for which the security rules are trusted by the admistrator). If IDENT is not used or not trusted, the API can use the basic HTTP authentication. You may also want to set-up https certificates. In summary, the API authentication is based on the http server's configuration. The API uses the <strong>X_REMOTE_IDENT</strong> http header variable, so the administrator has to set up this variable inside the http server configuration. Look at the provided apache sample configuration files (API/apache2.conf of the OAR sources) for more details.</p>
</li>
<li><p class="first"><strong>Usage</strong>:</p>
<p>Most of the time, you'll make requests that needs you to be authenticated.
If the IDENT method is used, your unix login is automatically used. But as only a few hosts may be trusted, you'll probably have to open a tunnel to one of this host. You may use ssh to do this. For example, supposing access.mycluster.fr is a gateway host trusted by the api host:</p>
<pre class="literal-block">
$ ssh -NL 8080:api.mycluster.fr:80 login&#64;access.mycluster.fr
</pre>
<p>Then, point your REST client to:</p>
<pre class="literal-block">
# http://localhost:8080
</pre>
</li>
</ul>
</div>
<div class="section" id="data-structures-and-formats">
<h2><a class="toc-backref" href="#id5">2.3&nbsp;&nbsp;&nbsp;Data structures and formats</a></h2>
<p>The API currently can serve data into <em>YAML</em>, <em>JSON</em> or <em>HTML</em>. Posted data can also be coded into <em>YAML</em>, <em>JSON</em> or <em>x-www-form-urlencoded</em> (for HTML from posts). You may specify the requested format by 2 ways:</p>
<blockquote>
<ul class="simple">
<li>giving an extension to resources: <strong>.yaml</strong>, <strong>.json</strong> or <strong>.html</strong></li>
<li>setting the <strong>HTTP_ACCEPT</strong> header variable to <strong>text/yaml</strong>, <strong>application/json</strong> or <strong>text/html</strong></li>
</ul>
</blockquote>
<p>For the posted data, you have to correctly set the <strong>HTTP_CONTENT_TYPE</strong> variable to <strong>text/yaml</strong>, <strong>application/json</strong> or <strong>application/x-www-form-urlencoded</strong>.</p>
<p>Sometimes, the data structures returned (not the coding format, but the contents: array, hashes, array of hashes,...) may be changed. Currently, we have 2 available data structures: <em>simple</em> and <em>oar</em>. The structure is passed through the variable <em>structure</em> that you may pass in the url, for example: ?structure=simple</p>
<blockquote>
<ul class="simple">
<li>The <strong>simple</strong> data structure tries to be as simple as possible, using simple arrays in place of hashes wherever it is possible</li>
<li>The <strong>oar</strong> data structure serves data in the way oar does with the oarnodes/oarstat export options (-Y, -D, -J,...)</li>
</ul>
</blockquote>
<p>By default, we use the <em>simple</em> data structure.</p>
<p>Here are some examples, using the ruby restclient (see next section):</p>
<pre class="literal-block">
# Getting resources infos
  # in JSON
irb(main):004:0&gt; puts get('/resources.json')
  # in YAML
irb(main):005:0&gt; puts get('/resources.yaml')
  # Same thing
irb(main):050:0&gt; puts get('/resources', :accept=&gt;&quot;text/yaml&quot;)
  # Specifying the &quot;oar&quot; data structure
irb(main):050:0&gt; puts get('/resources.json?structure=oar')
  # Specifying the &quot;simple&quot; data structure
irb(main):050:0&gt; puts get('/resources.json?structure=simple')
</pre>
</div>
<div class="section" id="errors-and-debug">
<h2><a class="toc-backref" href="#id6">2.4&nbsp;&nbsp;&nbsp;Errors and debug</a></h2>
<p>When the API returns an error, it generally uses a standard HTTP return status (404 NOT FOUND, 406 NOT ACCEPTABLE, ...). But it also returns a body containing a hash like the following:</p>
<pre class="literal-block">
{
 &quot;title&quot; : &quot;ERROR 406 - Invalid content type required */*&quot;,
 &quot;message&quot; : &quot;Valid types are text/yaml, application/json or text/html&quot;,
 &quot;code&quot; : &quot;200&quot;
}
</pre>
<p>This error body is formated in the requested format. But if this format was not given, it uses JSON by default.</p>
<p>To allow you to see the error body, you may find it useful to activate the <strong>debug=1</strong> variable. It will force the API to always return a 200 OK status, even if there's an error so that you can see the body with a simple browser or a rest client without having to manage the errors. For example:</p>
<pre class="literal-block">
wget -nv -O - &quot;http://localhost:8080/oargridapi/sites/grenoble?debug=1&quot;
</pre>
<p>Here is an example of error catching in ruby:</p>
<pre class="literal-block">
# Function to get objects from the api
# We use the JSON format
def get(api,uri)
  begin
    return JSON.parse(api[uri].get(:accept =&gt; 'application/json'))
  rescue =&gt; e
    if e.respond_to?('http_code')
      puts &quot;ERROR #{e.http_code}:\n #{e.response.body}&quot;
    else
      puts &quot;Parse error:&quot;
      puts e.inspect
    end
    exit 1
  end
end
</pre>
</div>
</div>
<div class="section" id="ruby-rest-client">
<h1><a class="toc-backref" href="#id7">3&nbsp;&nbsp;&nbsp;Ruby REST client</a></h1>
<p>One of the easiest way for testing this API is to use the rest-client ruby module:</p>
<p><a class="reference external" href="http://rest-client.heroku.com/rdoc/">http://rest-client.heroku.com/rdoc/</a></p>
<p>It may be used from ruby scripts (<a class="reference external" href="http://www.ruby.org/">http://www.ruby.org/</a>) or interactively.
It is available as a rubygem, so to install it, simply install rubygems and do &quot;gem install rest-client&quot;. Then, you can run the interactive client which is nothing else than irb with shortcuts. Here is an example irb session:</p>
<pre class="literal-block">
$ export PATH=$PATH:/var/lib/gems/1.8/bin
$ restclient http://localhost/oarapi
irb(main):001:0&gt; puts get('/jobs.yaml')
---
- api_timestamp: 1246457384
  id: 551
  name: ~
  owner: bzizou
  queue: besteffort
  state: Waiting
  submission: 1245858042
  uri: /jobs/551
=&gt; nil
irb(main):002:0&gt;
</pre>
<p>or, if an http basic auth is required:</p>
<pre class="literal-block">
restclient http://localhost/api &lt;login&gt; &lt;password&gt;
...
</pre>
</div>
<div class="section" id="rest-requests-description">
<h1><a class="toc-backref" href="#id8">4&nbsp;&nbsp;&nbsp;REST requests description</a></h1>
<p>Examples are given in the YAML format because we think that it is the more human readable and so very suitable for this kind of documentation. But you can also use the JSON format for your input/output data. Each resource uri may be postfixed by .yaml, .jso of .html.</p>
<dl class="docutils">
<dt>In this section, we describe every REST resources of the OAR API. The authentication may be:</dt>
<dd><ul class="first last simple">
<li>public: everybody can query this resource</li>
<li>user: only authenticated and valid users can query this resource</li>
<li>oar: only the oar user can query this resource (administration usage)</li>
</ul>
</dd>
</dl>
<div class="section" id="get-index">
<h2><a class="toc-backref" href="#id9">4.1&nbsp;&nbsp;&nbsp;GET /index</a></h2>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">description:</th><td class="field-body"><p class="first">Home page for the HTML browsing</p>
</td>
</tr>
<tr class="field"><th class="field-name">formats:</th><td class="field-body"><p class="first">html</p>
</td>
</tr>
<tr class="field"><th class="field-name">authentication:</th><td class="field-body"><p class="first">public</p>
</td>
</tr>
<tr class="field"><th class="field-name">output:</th><td class="field-body"><dl class="first docutils">
<dt><em>example</em>:</dt>
<dd><pre class="first last literal-block">
&lt;HTML&gt;
&lt;HEAD&gt;
&lt;TITLE&gt;OAR REST API&lt;/TITLE&gt;
&lt;/HEAD&gt;
&lt;BODY&gt;
&lt;HR&gt;
&lt;A HREF=./resources.html&gt;RESOURCES&lt;/A&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;
&lt;A HREF=./jobs.html&gt;JOBS&lt;/A&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;
&lt;A HREF=./jobs/form.html&gt;SUBMISSION&lt;/A&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;
&lt;HR&gt;
Welcome on the oar API
</pre>
</dd>
</dl>
</td>
</tr>
<tr class="field"><th class="field-name">note:</th><td class="field-body"><p class="first last">Header of the HTML resources may be customized into the <strong>/etc/oar/api_html_header.pl</strong> file.</p>
</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="get-version">
<h2><a class="toc-backref" href="#id10">4.2&nbsp;&nbsp;&nbsp;GET /version</a></h2>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">description:</th><td class="field-body"><p class="first">Gives version informations about OAR and OAR API. Also gives the timezone of the API server.</p>
</td>
</tr>
<tr class="field"><th class="field-name">formats:</th><td class="field-body"><p class="first">html , yaml , json</p>
</td>
</tr>
<tr class="field"><th class="field-name">authentication:</th><td class="field-body"><p class="first">public</p>
</td>
</tr>
<tr class="field"><th class="field-name">output:</th><td class="field-body"><dl class="first docutils">
<dt><em>structure</em>:</dt>
<dd><p class="first last">hash</p>
</dd>
<dt><em>yaml example</em>:</dt>
<dd><pre class="first last literal-block">
---
api: 0.1.2
api_timestamp: 1245582255
api_timezone: CEST
apilib: 0.1.6
oar: 2.4.0
</pre>
</dd>
</dl>
</td>
</tr>
<tr class="field"><th class="field-name">usage example:</th><td class="field-body"><pre class="first last literal-block">
wget -q -O - http://localhost/oarapi/version.yaml
</pre>
</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="get-timezone">
<h2><a class="toc-backref" href="#id11">4.3&nbsp;&nbsp;&nbsp;GET /timezone</a></h2>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">description:</th><td class="field-body"><p class="first">Gives the timezone of the OAR API server</p>
</td>
</tr>
<tr class="field"><th class="field-name">formats:</th><td class="field-body"><p class="first">html , yaml , json</p>
</td>
</tr>
<tr class="field"><th class="field-name">authentication:</th><td class="field-body"><p class="first">public</p>
</td>
</tr>
<tr class="field"><th class="field-name">output:</th><td class="field-body"><p class="first"><em>structure</em>: hash</p>
<dl class="docutils">
<dt><em>yaml example</em>:</dt>
<dd><pre class="first last literal-block">
---
api_timestamp: 1245768107
timezone: CEST
</pre>
</dd>
</dl>
</td>
</tr>
<tr class="field"><th class="field-name">usage example:</th><td class="field-body"><pre class="first last literal-block">
wget -q -O - http://localhost/oarapi/timezone.yaml
</pre>
</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="get-jobs">
<h2><a class="toc-backref" href="#id12">4.4&nbsp;&nbsp;&nbsp;GET /jobs</a></h2>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">description:</th><td class="field-body"><p class="first">List currently running jobs</p>
</td>
</tr>
<tr class="field"><th class="field-name">formats:</th><td class="field-body"><p class="first">html , yaml , json</p>
</td>
</tr>
<tr class="field"><th class="field-name">authentication:</th><td class="field-body"><p class="first">public</p>
</td>
</tr>
<tr class="field"><th class="field-name">output:</th><td class="field-body"><p class="first"><em>structure</em>: array of hashes (a job is an array element described by a hash)</p>
<dl class="docutils">
<dt><em>yaml example</em>:</dt>
<dd><pre class="first last literal-block">
---
- api_timestamp: 1245768256
  id: 547
  name: ~
  owner: bzizou
  queue: default
  resources_uri: /jobs/547/resources
  state: Running
  submission: 1245768249
  uri: /jobs/547
- api_timestamp: 1245768256
  id: 546
  name: ~
  owner: bzizou
  queue: default
  resources_uri: /jobs/546/resources
  state: Running
  submission: 1245768241
  uri: /jobs/546
</pre>
</dd>
</dl>
<p><em>note</em>: You can make a GET on the <em>uri</em> value for more details about a given job.</p>
</td>
</tr>
<tr class="field"><th class="field-name">usage example:</th><td class="field-body"><pre class="first last literal-block">
wget -q -O - http://localhost/oarapi/jobs.yaml
</pre>
</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="get-jobs-details">
<h2><a class="toc-backref" href="#id13">4.5&nbsp;&nbsp;&nbsp;GET /jobs/details</a></h2>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">description:</th><td class="field-body"><p class="first">List the current jobs and some details like assigned resources (behaves like &quot;oarstat -D&quot;)</p>
</td>
</tr>
<tr class="field"><th class="field-name">formats:</th><td class="field-body"><p class="first">html , yaml , json</p>
</td>
</tr>
<tr class="field"><th class="field-name">authentication:</th><td class="field-body"><p class="first">public</p>
</td>
</tr>
<tr class="field"><th class="field-name">output:</th><td class="field-body"><p class="first"><em>structure</em>: array of hashes (a job is an array element described by a hash)</p>
<dl class="docutils">
<dt><em>yaml example</em>:</dt>
<dd><pre class="first last literal-block">
---
- Job_Id: 575
  api_timestamp: 1253103710
  array_id: 575
  array_index: 1
  assigned_network_address:
    - bart-3
  assigned_resources:
    - 3
  command: /bin/sleep 300
  cpuset_name: bzizou_575
  dependencies: []
  jobType: PASSIVE
  job_id: 575
  launchingDirectory: /home/bzizou
  message: FIFO scheduling OK
  name: Test_job
  owner: bzizou
  project: default
  properties: desktop_computing = 'NO'
  queue: default
  reservation: None
  resources_uri: /jobs/575/resources
  resubmit_job_id: 0
  startTime: 1253103705
  state: Running
  submissionTime: 1253103704
  types: []
  uri: /jobs/575
- Job_Id: 576
  api_timestamp: 1253103710
  array_id: 576
  array_index: 1
  assigned_network_address: []
  assigned_resources: []
  command: /bin/sleep 300
  cpuset_name: bzizou_576
  dependencies: []
  jobType: PASSIVE
  job_id: 576
  launchingDirectory: /home/bzizou
  message: FIFO scheduling OK
  name: Test_job
  owner: bzizou
  project: default
  properties: desktop_computing = 'NO'
  queue: default
  reservation: None
  resources_uri: /jobs/576/resources
  resubmit_job_id: 0
  startTime: 0
  state: Waiting
  submissionTime: 1253103707
  types: []
  uri: /jobs/576
</pre>
</dd>
</dl>
<p><em>note</em>: You can make a GET on the <em>uri</em> value for more details about a given job.</p>
</td>
</tr>
<tr class="field"><th class="field-name">usage example:</th><td class="field-body"><pre class="first last literal-block">
wget -q -O - http://localhost/oarapi/jobs/details.yaml
</pre>
</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="get-jobs-table">
<h2><a class="toc-backref" href="#id14">4.6&nbsp;&nbsp;&nbsp;GET /jobs/table</a></h2>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">description:</th><td class="field-body"><p class="first">Dump the jobs table (only current jobs)</p>
</td>
</tr>
<tr class="field"><th class="field-name">formats:</th><td class="field-body"><p class="first">html , yaml , json</p>
</td>
</tr>
<tr class="field"><th class="field-name">authentication:</th><td class="field-body"><p class="first">public</p>
</td>
</tr>
<tr class="field"><th class="field-name">output:</th><td class="field-body"><p class="first"><em>structure</em>: array of hashes (a job is an array element described by a hash)</p>
<dl class="docutils">
<dt><em>yaml example</em>:</dt>
<dd><pre class="first last literal-block">
---
- accounted: NO
  api_timestamp: 1253017554
  array_id: 566
  assigned_moldable_job: 566
  checkpoint: 0
  checkpoint_signal: 12
  command: ''
  exit_code: ~
  file_id: ~
  info_type: bart:33033
  initial_request: oarsub -I
  job_env: ~
  job_group: ''
  job_id: 566
  job_name: ~
  job_type: INTERACTIVE
  job_user: bzizou
  launching_directory: /home/bzizou/git/oar/git
  message: FIFO scheduling OK
  notify: ~
  project: default
  properties: desktop_computing = 'NO'
  queue_name: default
  reservation: None
  resubmit_job_id: 0
  scheduler_info: FIFO scheduling OK
  start_time: 1253017553
  state: Launching
  stderr_file: OAR.%jobid%.stderr
  stdout_file: OAR.%jobid%.stdout
  stop_time: 0
  submission_time: 1253017551
  suspended: NO
  uri: /jobs/566
- accounted: NO
  api_timestamp: 1253017554
  array_id: 560
  assigned_moldable_job: 0
  checkpoint: 0
  checkpoint_signal: 12
  command: /usr/bin/id
  exit_code: ~
  file_id: ~
  info_type: 'bart:'
  initial_request: oarsub --resource=/nodes=2/cpu=1 --use_job_key=1 /usr/bin/id
  job_env: ~
  job_group: ''
  job_id: 560
  job_name: ~
  job_type: PASSIVE
  job_user: bzizou
  launching_directory: /home/bzizou
  message: Cannot find enough resources which fit for the job 560
  notify: ~
  project: default
  properties: desktop_computing = 'NO'
  queue_name: default
  reservation: None
  resubmit_job_id: 0
  scheduler_info: Cannot find enough resources which fit for the job 560
  start_time: 0
  state: Waiting
  stderr_file: OAR.%jobid%.stderr
  stdout_file: OAR.%jobid%.stdout
  stop_time: 0
  submission_time: 1246948570
  suspended: NO
  uri: /jobs/560
</pre>
</dd>
</dl>
<p><em>note</em>: You can make a GET on the <em>uri</em> value for more details about a given job.</p>
<p><em>note</em>: Field names may vary from the other job lists because this query results more like a dump of the jobs table.</p>
</td>
</tr>
<tr class="field"><th class="field-name">usage example:</th><td class="field-body"><pre class="first last literal-block">
wget -q -O - http://localhost/oarapi/jobs/table.yaml
</pre>
</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="get-jobs-id">
<h2><a class="toc-backref" href="#id15">4.7&nbsp;&nbsp;&nbsp;GET /jobs/&lt;id&gt;</a></h2>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">description:</th><td class="field-body"><p class="first">Get details about the given job</p>
</td>
</tr>
<tr class="field"><th class="field-name">parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>id</strong>: the id of a job</li>
</ul>
</td>
</tr>
<tr class="field"><th class="field-name">formats:</th><td class="field-body"><p class="first">html , yaml , json</p>
</td>
</tr>
<tr class="field"><th class="field-name">authentication:</th><td class="field-body"><p class="first">user</p>
</td>
</tr>
<tr class="field"><th class="field-name">output:</th><td class="field-body"><p class="first"><em>structure</em>: hash</p>
<dl class="docutils">
<dt><em>yaml example</em>:</dt>
<dd><pre class="first last literal-block">
---
Job_Id: 547
id: 547
uri: /jobs/547
array_id: 547
array_index: 1
assigned_network_address:
  - liza-2
assigned_resources:
  - 6
command: ''
cpuset_name: bzizou_547
dependencies: []
events:
  - date: 1245775464
    description: User root requested to frag the job 547
    event_id: 1315
    job_id: 547
    to_check: NO
    type: FRAG_JOB_REQUEST
  - date: 1245775464
    description: '[sarko] Job [547] from 1245768251 with 7200; current time=1245775463 (Elapsed)'
    event_id: 1316
    job_id: 547
    to_check: NO
    type: WALLTIME
  - date: 1245775464
    description: '[Leon] Send kill signal to oarexec on liza-2 for the job 547'
    event_id: 1318
    job_id: 547
    to_check: NO
    type: SEND_KILL_JOB
  - date: 1245775469
    description: '[bipbip 547] Ask to change the job state'
    event_id: 1320
    job_id: 547
    to_check: NO
    type: SWITCH_INTO_ERROR_STATE
exit_code: ~
initial_request: ''
jobType: INTERACTIVE
job_uid: ~
job_user: bzizou
launchingDirectory: /home/bzizou
message: FIFO scheduling OK
name: ~
owner: bzizou
project: default
properties: desktop_computing = 'NO'
queue: default
reservation: None
resources_uri: /jobs/547/resources
resubmit_job_id: 0
scheduledStart: ~
startTime: 1245768251
state: Error
submissionTime: 1245768249
types: []
walltime: 7200
wanted_resources: &quot;-l \&quot;{type = 'default'}/resource_id=1,walltime=2:0:0\&quot; &quot;
</pre>
</dd>
</dl>
</td>
</tr>
<tr class="field"><th class="field-name">usage example:</th><td class="field-body"><pre class="first last literal-block">
wget --user test --password test -q -O - http://localhost/oarapi/jobs/547.yaml
</pre>
</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="get-jobs-id-resources">
<h2><a class="toc-backref" href="#id16">4.8&nbsp;&nbsp;&nbsp;GET /jobs/&lt;id&gt;/resources</a></h2>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">description:</th><td class="field-body"><p class="first">Get resources reserved or assigned to a job</p>
</td>
</tr>
<tr class="field"><th class="field-name">parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>id</strong>: the id of a job</li>
</ul>
</td>
</tr>
<tr class="field"><th class="field-name">formats:</th><td class="field-body"><p class="first">html , yaml , json</p>
</td>
</tr>
<tr class="field"><th class="field-name">authentication:</th><td class="field-body"><p class="first">public</p>
</td>
</tr>
<tr class="field"><th class="field-name">output:</th><td class="field-body"><p class="first"><em>structure</em>: hash</p>
<dl class="docutils">
<dt><em>yaml example</em>:</dt>
<dd><pre class="first last literal-block">
---
api_timestamp: 1253279408
assigned_nodes:
  - node: liza-1
    node_uri: /resources/nodes/liza-1
assigned_resources:
  - resource_id: 4
    resource_uri: /resources/4
  - resource_id: 5
    resource_uri: /resources/5
job_id: 622
job_uri: /jobs/622
reserved_resources: []
</pre>
</dd>
</dl>
</td>
</tr>
<tr class="field"><th class="field-name">usage example:</th><td class="field-body"><pre class="first last literal-block">
wget -q -O - http://localhost/oarapi/jobs/547/resources.yaml
</pre>
</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="post-jobs-id-deletions-new">
<h2><a class="toc-backref" href="#id17">4.9&nbsp;&nbsp;&nbsp;POST /jobs/&lt;id&gt;/deletions/new</a></h2>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">description:</th><td class="field-body"><p class="first">Deletes a job</p>
</td>
</tr>
<tr class="field"><th class="field-name">parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>id</strong>: the id of a job</li>
</ul>
</td>
</tr>
<tr class="field"><th class="field-name">formats:</th><td class="field-body"><p class="first">html , yaml , json</p>
</td>
</tr>
<tr class="field"><th class="field-name">authentication:</th><td class="field-body"><p class="first">user</p>
</td>
</tr>
<tr class="field"><th class="field-name">output:</th><td class="field-body"><p class="first"><em>structure</em>: hash</p>
<dl class="docutils">
<dt><em>yaml example</em>:</dt>
<dd><pre class="first last literal-block">
---
api_timestamp: 1253025331
cmd_output: |
  Deleting the job = 567 ...REGISTERED.
  The job(s) [ 567 ] will be deleted in a near future.
id: 567
status: Delete request registered
</pre>
</dd>
</dl>
</td>
</tr>
<tr class="field"><th class="field-name">usage example:</th><td class="field-body"><pre class="first last literal-block">
irb(main):148:0&gt; puts post('/jobs/567/deletions/new.yaml','')
</pre>
</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="post-jobs-id-checkpoints-new">
<h2><a class="toc-backref" href="#id18">4.10&nbsp;&nbsp;&nbsp;POST /jobs/&lt;id&gt;/checkpoints/new</a></h2>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">description:</th><td class="field-body"><p class="first">Send the checkpoint signal to a job</p>
</td>
</tr>
<tr class="field"><th class="field-name">parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>id</strong>: the id of a job</li>
</ul>
</td>
</tr>
<tr class="field"><th class="field-name">formats:</th><td class="field-body"><p class="first">html , yaml , json</p>
</td>
</tr>
<tr class="field"><th class="field-name">authentication:</th><td class="field-body"><p class="first">user</p>
</td>
</tr>
<tr class="field"><th class="field-name">output:</th><td class="field-body"><p class="first"><em>structure</em>: hash</p>
<dl class="docutils">
<dt><em>yaml example</em>:</dt>
<dd><pre class="first last literal-block">
---
api_timestamp: 1253025555
cmd_output: |
  Checkpointing the job 568 ...DONE.
  The job 568 was notified to checkpoint itself.
id: 568
status: Checkpoint request registered
</pre>
</dd>
</dl>
</td>
</tr>
<tr class="field"><th class="field-name">usage example:</th><td class="field-body"><pre class="first last literal-block">
irb(main):148:0&gt; puts post('/jobs/568/checkpoints/new.yaml','')
</pre>
</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="post-jobs-id-holds-new">
<h2><a class="toc-backref" href="#id19">4.11&nbsp;&nbsp;&nbsp;POST /jobs/&lt;id&gt;/holds/new</a></h2>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">description:</th><td class="field-body"><p class="first">Asks to hold a waiting job</p>
</td>
</tr>
<tr class="field"><th class="field-name">parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>id</strong>: the id of a job</li>
</ul>
</td>
</tr>
<tr class="field"><th class="field-name">formats:</th><td class="field-body"><p class="first">html , yaml , json</p>
</td>
</tr>
<tr class="field"><th class="field-name">authentication:</th><td class="field-body"><p class="first">user</p>
</td>
</tr>
<tr class="field"><th class="field-name">output:</th><td class="field-body"><p class="first"><em>structure</em>: hash</p>
<dl class="docutils">
<dt><em>yaml example</em>:</dt>
<dd><pre class="first last literal-block">
---
api_timestamp: 1253025718
cmd_output: &quot;[560] Hold request was sent to the OAR server.\n&quot;
id: 560
status: Hold request registered
</pre>
</dd>
</dl>
</td>
</tr>
<tr class="field"><th class="field-name">usage example:</th><td class="field-body"><pre class="first last literal-block">
irb(main):148:0&gt; puts post('/jobs/560/holds/new.yaml','')
</pre>
</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="post-jobs-id-rholds-new">
<h2><a class="toc-backref" href="#id20">4.12&nbsp;&nbsp;&nbsp;POST /jobs/&lt;id&gt;/rholds/new</a></h2>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">description:</th><td class="field-body"><p class="first">Asks to hold a running job</p>
</td>
</tr>
<tr class="field"><th class="field-name">parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>id</strong>: the id of a job</li>
</ul>
</td>
</tr>
<tr class="field"><th class="field-name">formats:</th><td class="field-body"><p class="first">html , yaml , json</p>
</td>
</tr>
<tr class="field"><th class="field-name">authentication:</th><td class="field-body"><p class="first">oar</p>
</td>
</tr>
<tr class="field"><th class="field-name">output:</th><td class="field-body"><p class="first"><em>structure</em>: hash</p>
<dl class="docutils">
<dt><em>yaml example</em>:</dt>
<dd><pre class="first last literal-block">
---
api_timestamp: 1253025868
cmd_output: &quot;[569] Hold request was sent to the OAR server.\n&quot;
id: 569
status: Hold request registered
</pre>
</dd>
</dl>
</td>
</tr>
<tr class="field"><th class="field-name">usage example:</th><td class="field-body"><pre class="first last literal-block">
irb(main):148:0&gt; puts post('/jobs/560/rholds/new.yaml','')
</pre>
</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="post-jobs-id-resumptions-new">
<h2><a class="toc-backref" href="#id21">4.13&nbsp;&nbsp;&nbsp;POST /jobs/&lt;id&gt;/resumptions/new</a></h2>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">description:</th><td class="field-body"><p class="first">Asks to resume a holded job</p>
</td>
</tr>
<tr class="field"><th class="field-name">parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>id</strong>: the id of a job</li>
</ul>
</td>
</tr>
<tr class="field"><th class="field-name">formats:</th><td class="field-body"><p class="first">html , yaml , json</p>
</td>
</tr>
<tr class="field"><th class="field-name">authentication:</th><td class="field-body"><p class="first">user</p>
</td>
</tr>
<tr class="field"><th class="field-name">output:</th><td class="field-body"><p class="first"><em>structure</em>: hash</p>
<dl class="docutils">
<dt><em>yaml example</em>:</dt>
<dd><pre class="first last literal-block">
---
api_timestamp: 1253026081
cmd_output: &quot;[569] Resume request was sent to the OAR server.\n&quot;
id: 569
status: Resume request registered
</pre>
</dd>
</dl>
</td>
</tr>
<tr class="field"><th class="field-name">usage example:</th><td class="field-body"><pre class="first last literal-block">
irb(main):148:0&gt; puts post('/jobs/560/resumptions/new.yaml','')
</pre>
</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="post-jobs-id-signals-signal">
<h2><a class="toc-backref" href="#id22">4.14&nbsp;&nbsp;&nbsp;POST /jobs/&lt;id&gt;/signals/&lt;signal&gt;</a></h2>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">description:</th><td class="field-body"><p class="first">Asks to resume a holded job</p>
</td>
</tr>
<tr class="field"><th class="field-name">parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>id</strong>: the id of a job</li>
<li><strong>signal</strong>: the number of a signal (see kill -l)</li>
</ul>
</td>
</tr>
<tr class="field"><th class="field-name">formats:</th><td class="field-body"><p class="first">html , yaml , json</p>
</td>
</tr>
<tr class="field"><th class="field-name">authentication:</th><td class="field-body"><p class="first">user</p>
</td>
</tr>
<tr class="field"><th class="field-name">output:</th><td class="field-body"><p class="first"><em>structure</em>: hash</p>
<dl class="docutils">
<dt><em>yaml example</em>:</dt>
<dd><pre class="first last literal-block">
---
api_timestamp: 1253102493
cmd_output: |
  Signaling the job 574 with 12 signal.
  DONE.
  The job 574 was notified to signal itself with 12.
id: 574
status: Signal sending request registered
</pre>
</dd>
</dl>
</td>
</tr>
<tr class="field"><th class="field-name">usage example:</th><td class="field-body"><pre class="first last literal-block">
irb(main):148:0&gt; puts post('/jobs/560/signals/12.yaml','')
</pre>
</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="post-jobs">
<h2><a class="toc-backref" href="#id23">4.15&nbsp;&nbsp;&nbsp;POST /jobs</a></h2>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">description:</th><td class="field-body"><p class="first">Creates (submit) a new job</p>
</td>
</tr>
<tr class="field"><th class="field-name">formats:</th><td class="field-body"><p class="first">html , yaml , json</p>
</td>
</tr>
<tr class="field"><th class="field-name">authentication:</th><td class="field-body"><p class="first">user</p>
</td>
</tr>
<tr class="field"><th class="field-name">input:</th><td class="field-body"><p class="first">Only [resource] and [command] are mandatory</p>
<p><em>structure</em>: hash with possible arrays (for options that may be passed multiple times)</p>
<dl class="docutils">
<dt><em>fields</em>:</dt>
<dd><ul class="first last simple">
<li><strong>resource</strong> (<em>string</em>): the resources description as required by oar (example: &quot;/nodes=1/cpu=2&quot;)</li>
<li><strong>command</strong> (<em>string</em>): a command name or a script that is executed when the job starts</li>
<li><strong>workdir</strong> (<em>string</em>): the path of the directory from where the job will be submited</li>
<li><strong>All other option accepted by the oarsub unix command</strong>: every long option that may be passed to the oarsub command is known as a key of the input hash. If the option is a toggle (no value), you just have to set it to &quot;1&quot; (for example: 'use-job-key' =&gt; '1'). Some options may be arrays (for example if you want to specify several 'types' for a job)</li>
</ul>
</dd>
<dt><em>yaml example</em>:</dt>
<dd><pre class="first last literal-block">
---
stdout: /tmp/outfile
command: /usr/bin/id;echo &quot;OK&quot;
resource: /nodes=2/cpu=1
workdir: ~bzizou/tmp
type:
- besteffort
- timesharing
use-job-key: 1
</pre>
</dd>
</dl>
</td>
</tr>
<tr class="field"><th class="field-name">output:</th><td class="field-body"><p class="first"><em>structure</em>: hash</p>
<dl class="docutils">
<dt><em>yaml example</em>:</dt>
<dd><pre class="first last literal-block">
---
api_timestamp: 1245858042
id: 551
status: submitted
uri: /jobs/551
</pre>
</dd>
</dl>
<p><em>note</em>: more informations about the submited job may be obtained with a GET on the provided <em>uri</em>.</p>
</td>
</tr>
<tr class="field"><th class="field-name">usage example:</th><td class="field-body"><pre class="first last literal-block">
# Submitting a job using ruby rest client
irb(main):010:0&gt; require 'json'
irb(main):012:0&gt; j={ 'resource' =&gt; '/nodes=2/cpu=1', 'command' =&gt; '/usr/bin/id' }
irb(main):015:0&gt; job=post('/jobs' , j.to_json , :content_type =&gt; 'application/json')

# Submitting a job with a provided inline script
irb(main):024:0&gt; script=&quot;#!/bin/bash
irb(main):025:0&quot; echo \&quot;Hello world\&quot;
irb(main):026:0&quot; whoami
irb(main):027:0&quot; sleep 300
irb(main):028:0&quot; &quot;
irb(main):029:0&gt; j={ 'resource' =&gt; '/nodes=2/cpu=1', 'script' =&gt; script , 'workdir' =&gt; '~bzizou/tmp'}
irb(main):030:0&gt; job=post('/jobs' , j.to_json , :content_type =&gt; 'application/json')
</pre>
</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="post-jobs-id">
<h2><a class="toc-backref" href="#id24">4.16&nbsp;&nbsp;&nbsp;POST /jobs/&lt;id&gt;</a></h2>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">description:</th><td class="field-body"><p class="first">Updates a job.
In fact, as some clients (www browsers) doesn't support the DELETE method, this POST resource has been created mainly to workaround this and provide another way to delete a job. It also provides <em>checkpoint</em>, <em>hold</em> and <em>resume</em> methods, but one should preferably use the /checkpoints, /holds and /resumptions resources.</p>
</td>
</tr>
<tr class="field"><th class="field-name">formats:</th><td class="field-body"><p class="first">html , yaml , json</p>
</td>
</tr>
<tr class="field"><th class="field-name">authentication:</th><td class="field-body"><p class="first">user</p>
</td>
</tr>
<tr class="field"><th class="field-name">input:</th><td class="field-body"><p class="first"><em>structure</em>: hash {&quot;action&quot; =&gt; &quot;delete&quot;}</p>
<dl class="docutils">
<dt><em>yaml example</em>:</dt>
<dd><pre class="first last literal-block">
---
method: delete
</pre>
</dd>
</dl>
</td>
</tr>
<tr class="field"><th class="field-name">output:</th><td class="field-body"><p class="first"><em>structure</em>: hash</p>
<dl class="docutils">
<dt><em>yaml example</em>:</dt>
<dd><pre class="first last literal-block">
---
api_timestamp: 1245944206
cmd_output: |
  Deleting the job = 554 ...REGISTERED.
  The job(s) [ 554 ] will be deleted in a near future.
id: 554
status: Delete request registered
</pre>
</dd>
</dl>
</td>
</tr>
<tr class="field"><th class="field-name">usage example:</th><td class="field-body"><pre class="first last literal-block">
# Deleting a job in the ruby rest client
puts post('/jobs/554.yaml','{&quot;method&quot;:&quot;delete&quot;}',:content_type =&gt; &quot;application/json&quot;)
</pre>
</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="delete-jobs-id">
<h2><a class="toc-backref" href="#id25">4.17&nbsp;&nbsp;&nbsp;DELETE /jobs/&lt;id&gt;</a></h2>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">description:</th><td class="field-body"><p class="first">Delete or kill a job.</p>
</td>
</tr>
<tr class="field"><th class="field-name">formats:</th><td class="field-body"><p class="first">html , yaml , json</p>
</td>
</tr>
<tr class="field"><th class="field-name">authentication:</th><td class="field-body"><p class="first">user</p>
</td>
</tr>
<tr class="field"><th class="field-name">output:</th><td class="field-body"><p class="first"><em>structure</em>: hash returning the status</p>
<dl class="docutils">
<dt><em>yaml example</em>:</dt>
<dd><pre class="first last literal-block">
---
api_timestamp: 1245944206
cmd_output: |
  Deleting the job = 554 ...REGISTERED.
  The job(s) [ 554 ] will be deleted in a near future.
id: 554
status: Delete request registered
</pre>
</dd>
</dl>
</td>
</tr>
<tr class="field"><th class="field-name">usage example:</th><td class="field-body"><pre class="first literal-block">
# Deleting a job in the ruby rest client
puts delete('/jobs/554.yaml')
</pre>
</td>
</tr>
<tr class="field"><th class="field-name">note:</th><td class="field-body"><p class="first last">Not all clients support the DELETE method, especially some www browsers. So, you can do the same thing with a POST of a {&quot;method&quot;:&quot;delete&quot;} hash on the /jobs/&lt;id&gt; resource.</p>
</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="get-jobs-form">
<h2><a class="toc-backref" href="#id26">4.18&nbsp;&nbsp;&nbsp;GET /jobs/form</a></h2>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">description:</th><td class="field-body"><p class="first">HTML form for posting (submiting) new jobs from a browser</p>
</td>
</tr>
<tr class="field"><th class="field-name">formats:</th><td class="field-body"><p class="first">html</p>
</td>
</tr>
<tr class="field"><th class="field-name">authentication:</th><td class="field-body"><p class="first">user</p>
</td>
</tr>
<tr class="field"><th class="field-name">output:</th><td class="field-body"><dl class="first docutils">
<dt><em>example</em>:</dt>
<dd><pre class="first last literal-block">
&lt;HTML&gt;
 &lt;HEAD&gt;
 &lt;TITLE&gt;OAR REST API&lt;/TITLE&gt;
 &lt;/HEAD&gt;
 &lt;BODY&gt;
 &lt;HR&gt;
 &lt;A HREF=../resources.html&gt;RESOURCES&lt;/A&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;
 &lt;A HREF=../jobs.html&gt;JOBS&lt;/A&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;
 &lt;A HREF=../jobs/form.html&gt;SUBMISSION&lt;/A&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;
 &lt;HR&gt;

 &lt;FORM METHOD=post ACTION=../jobs.html&gt;
 &lt;TABLE&gt;
 &lt;CAPTION&gt;Job submission&lt;/CAPTION&gt;
 &lt;TR&gt;
   &lt;TD&gt;Resources&lt;/TD&gt;
   &lt;TD&gt;&lt;INPUT TYPE=text SIZE=40 NAME=resource VALUE=&quot;/nodes=1/cpu=1,walltime=00:30:00&quot;&gt;&lt;/TD&gt;
 &lt;/TR&gt;&lt;TR&gt;
   &lt;TD&gt;Name&lt;/TD&gt;
   &lt;TD&gt;&lt;INPUT TYPE=text SIZE=40 NAME=name VALUE=&quot;Test_job&quot;&gt;&lt;/TD&gt;
 &lt;/TR&gt;&lt;TR&gt;
   &lt;TD&gt;Properties&lt;/TD&gt;
   &lt;TD&gt;&lt;INPUT TYPE=text SIZE=40 NAME=property VALUE=&quot;&quot;&gt;&lt;/TD&gt;
 &lt;/TR&gt;&lt;TR&gt;
   &lt;TD&gt;Program to run&lt;/TD&gt;
   &lt;TD&gt;&lt;INPUT TYPE=text SIZE=40 NAME=command VALUE='&quot;/bin/sleep 300&quot;'&gt;&lt;/TD&gt;
 &lt;/TR&gt;&lt;TR&gt;
   &lt;TD&gt;Types&lt;/TD&gt;
   &lt;TD&gt;&lt;INPUT TYPE=text SIZE=40 NAME=type&gt;&lt;/TD&gt;
 &lt;/TR&gt;&lt;TR&gt;
   &lt;TD&gt;Reservation dates&lt;/TD&gt;
   &lt;TD&gt;&lt;INPUT TYPE=text SIZE=40 NAME=reservation&gt;&lt;/TD&gt;
 &lt;/TR&gt;&lt;TR&gt;
   &lt;TD&gt;Directory&lt;/TD&gt;
   &lt;TD&gt;&lt;INPUT TYPE=text SIZE=40 NAME=directory&gt;&lt;/TD&gt;
 &lt;/TR&gt;&lt;TR&gt;
   &lt;TD&gt;&lt;/TD&gt;&lt;TD&gt;&lt;INPUT TYPE=submit VALUE=SUBMIT&gt;&lt;/TD&gt;
 &lt;/TR&gt;
 &lt;/TABLE&gt;
 &lt;/FORM&gt;
</pre>
</dd>
</dl>
</td>
</tr>
<tr class="field"><th class="field-name">note:</th><td class="field-body"><p class="first last">This form may be customized in the <strong>/etc/oar/api_html_postform.pl</strong> file</p>
</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="get-resources">
<h2><a class="toc-backref" href="#id27">4.19&nbsp;&nbsp;&nbsp;GET /resources</a></h2>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">description:</th><td class="field-body"><p class="first">Get the list of resources and their state</p>
</td>
</tr>
<tr class="field"><th class="field-name">formats:</th><td class="field-body"><p class="first">html , yaml , json</p>
</td>
</tr>
<tr class="field"><th class="field-name">authentication:</th><td class="field-body"><p class="first">public</p>
</td>
</tr>
<tr class="field"><th class="field-name">output:</th><td class="field-body"><p class="first"><em>structure</em>: array of hashes</p>
<dl class="docutils">
<dt><em>yaml example</em>:</dt>
<dd><pre class="first last literal-block">
---
- api_timestamp: 1253201950
  jobs_uri: /resources/4/jobs
  network_address: liza-1
  node_uri: /resources/nodes/liza-1
  resource_id: 4
  state: Alive
  uri: /resources/4
- api_timestamp: 1253201950
  jobs_uri: /resources/5/jobs
  network_address: liza-1
  node_uri: /resources/nodes/liza-1
  resource_id: 5
  state: Alive
  uri: /resources/5
- api_timestamp: 1253201950
  jobs_uri: /resources/6/jobs
  network_address: liza-2
  node_uri: /resources/nodes/liza-2
  resource_id: 6
  state: Alive
  uri: /resources/6
- api_timestamp: 1253201950
  jobs_uri: /resources/7/jobs
  network_address: liza-2
  node_uri: /resources/nodes/liza-2
  resource_id: 7
  state: Alive
  uri: /resources/7
</pre>
</dd>
</dl>
<p><em>note</em>: More details about a resource can be obtained with a GET on the provided <em>uri</em>. The list of all the resources of the same node may be obtained with a GET on <em>node_uri</em>. The list of running jobs on a resource can be obtained with a GET on the jobs_uri resource.</p>
</td>
</tr>
<tr class="field"><th class="field-name">usage example:</th><td class="field-body"><pre class="first last literal-block">
wget -q -O - http://localhost/oarapi/resources.yaml
</pre>
</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="get-resources-full">
<h2><a class="toc-backref" href="#id28">4.20&nbsp;&nbsp;&nbsp;GET /resources/full</a></h2>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">description:</th><td class="field-body"><p class="first">Get the list of resources and all the details about them</p>
</td>
</tr>
<tr class="field"><th class="field-name">formats:</th><td class="field-body"><p class="first">html , yaml , json</p>
</td>
</tr>
<tr class="field"><th class="field-name">authentication:</th><td class="field-body"><p class="first">public</p>
</td>
</tr>
<tr class="field"><th class="field-name">output:</th><td class="field-body"><p class="first"><em>structure</em>: array of hashes</p>
<dl class="docutils">
<dt><em>yaml example</em>:</dt>
<dd><pre class="first last literal-block">
---
- api_timestamp: 1253202216
  available_upto: 0
  besteffort: YES
  cluster: 0
  cpu: 3
  cpuset: 0
  deploy: YES
  desktop_computing: NO
  expiry_date: 0
  finaud_decision: NO
  jobs_uri: /resources/4/jobs
  last_available_upto: 0
  last_job_date: 1245825515
  licence: ~
  network_address: liza-1
  next_finaud_decision: NO
  next_state: UnChanged
  node_uri: /resources/nodes/liza-1
  resource_id: 4
  scheduler_priority: 4294967289
  state: Alive
  state_num: 1
  suspended_jobs: NO
  test: ~
  type: default
  uri: /resources/4
- api_timestamp: 1253202216
  available_upto: 0
  besteffort: YES
  cluster: 0
  cpu: 4
  cpuset: 1
  deploy: YES
  desktop_computing: NO
  expiry_date: 0
  finaud_decision: NO
  jobs_uri: /resources/5/jobs
  last_available_upto: 0
  last_job_date: 1240244422
  licence: ~
  network_address: liza-1
  next_finaud_decision: NO
  next_state: UnChanged
  node_uri: /resources/nodes/liza-1
  resource_id: 5
  scheduler_priority: 4294967293
  state: Alive
  state_num: 1
  suspended_jobs: NO
  test: ~
  type: default
  uri: /resources/5
- api_timestamp: 1253202216
  available_upto: 0
  besteffort: YES
  cluster: 0
  cpu: 5
  cpuset: 0
  deploy: NO
  desktop_computing: NO
  expiry_date: 0
  finaud_decision: NO
  jobs_uri: /resources/6/jobs
  last_available_upto: 0
  last_job_date: 1253198104
  licence: ~
  network_address: liza-2
  next_finaud_decision: NO
  next_state: UnChanged
  node_uri: /resources/nodes/liza-2
  resource_id: 6
  scheduler_priority: 0
  state: Alive
  state_num: 1
  suspended_jobs: NO
  test: ~
  type: default
  uri: /resources/6
- api_timestamp: 1253202216
  available_upto: 0
  besteffort: YES
  cluster: 0
  cpu: 6
  cpuset: 1
  deploy: NO
  desktop_computing: NO
  expiry_date: 0
  finaud_decision: NO
  jobs_uri: /resources/7/jobs
  last_available_upto: 0
  last_job_date: 1245671780
  licence: ~
  network_address: liza-2
  next_finaud_decision: NO
  next_state: UnChanged
  node_uri: /resources/nodes/liza-2
  resource_id: 7
  scheduler_priority: 0
  state: Alive
  state_num: 1
  suspended_jobs: NO
  test: ~
  type: default
  uri: /resources/7
</pre>
</dd>
</dl>
</td>
</tr>
<tr class="field"><th class="field-name">usage example:</th><td class="field-body"><pre class="first last literal-block">
wget -q -O - http://localhost/oarapi/resources/full.yaml
</pre>
</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="get-resources-id">
<h2><a class="toc-backref" href="#id29">4.21&nbsp;&nbsp;&nbsp;GET /resources/&lt;id&gt;</a></h2>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">description:</th><td class="field-body"><p class="first">Get details about the resource identified by <em>id</em></p>
</td>
</tr>
<tr class="field"><th class="field-name">formats:</th><td class="field-body"><p class="first">html , yaml , json</p>
</td>
</tr>
<tr class="field"><th class="field-name">authentication:</th><td class="field-body"><p class="first">public</p>
</td>
</tr>
<tr class="field"><th class="field-name">output:</th><td class="field-body"><p class="first"><em>structure</em>: 1 element array of hash</p>
<dl class="docutils">
<dt><em>yaml example</em>:</dt>
<dd><pre class="first last literal-block">
---
api_timestamp: 1253202322
available_upto: 0
besteffort: YES
cluster: 0
cpu: 20
cpuset: 0
deploy: NO
desktop_computing: NO
expiry_date: 0
finaud_decision: NO
jobs_uri: /resources/1/jobs
last_available_upto: 0
last_job_date: 1253201845
licence: ~
network_address: bart-1
next_finaud_decision: NO
next_state: UnChanged
node_uri: /resources/nodes/bart-1
resource_id: 1
scheduler_priority: 0
state: Alive
state_num: 1
suspended_jobs: NO
test: ~
type: default
uri: /resources/1
</pre>
</dd>
</dl>
</td>
</tr>
<tr class="field"><th class="field-name">usage example:</th><td class="field-body"><pre class="first last literal-block">
wget -q -O - http://localhost/oarapi/resources/1.yaml
</pre>
</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="get-resources-nodes-network-address">
<h2><a class="toc-backref" href="#id30">4.22&nbsp;&nbsp;&nbsp;GET /resources/nodes/&lt;network_address&gt;</a></h2>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">description:</th><td class="field-body"><p class="first">Get details about the resources belonging to the node identified by <em>network_address</em></p>
</td>
</tr>
<tr class="field"><th class="field-name">formats:</th><td class="field-body"><p class="first">html , yaml , json</p>
</td>
</tr>
<tr class="field"><th class="field-name">authentication:</th><td class="field-body"><p class="first">public</p>
</td>
</tr>
<tr class="field"><th class="field-name">output:</th><td class="field-body"><p class="first"><em>structure</em>: array of hashes</p>
<dl class="docutils">
<dt><em>yaml example</em>:</dt>
<dd><pre class="first last literal-block">
---
- api_timestamp: 1253202379
  jobs_uri: /resources/4/jobs
  network_address: liza-1
  node_uri: /resources/nodes/liza-1
  resource_id: 4
  state: Alive
  uri: /resources/4
- api_timestamp: 1253202379
  jobs_uri: /resources/5/jobs
  network_address: liza-1
  node_uri: /resources/nodes/liza-1
  resource_id: 5
  state: Alive
  uri: /resources/5
</pre>
</dd>
</dl>
</td>
</tr>
<tr class="field"><th class="field-name">usage example:</th><td class="field-body"><pre class="first last literal-block">
wget -q -O - http://localhost/oarapi/resources/nodes/liza-1.yaml
</pre>
</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="post-resources">
<h2><a class="toc-backref" href="#id31">4.23&nbsp;&nbsp;&nbsp;POST /resources</a></h2>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">description:</th><td class="field-body"><p class="first">Creates a new resource</p>
</td>
</tr>
<tr class="field"><th class="field-name">formats:</th><td class="field-body"><p class="first">html , yaml , json</p>
</td>
</tr>
<tr class="field"><th class="field-name">authentication:</th><td class="field-body"><p class="first">oar</p>
</td>
</tr>
<tr class="field"><th class="field-name">input:</th><td class="field-body"><p class="first">A [hostname] or [network_address] entry is mandatory</p>
<p><em>structure</em>: hash describing the resource to be created</p>
<dl class="docutils">
<dt><em>fields</em>:</dt>
<dd><ul class="first last simple">
<li><strong>hostname</strong> alias <strong>network_address</strong> (<em>string</em>): the network address given to the resource</li>
<li><strong>properties</strong> (<em>hash</em>): an optional hash defining some properties for this new resource</li>
</ul>
</dd>
<dt><em>yaml example</em>:</dt>
<dd><pre class="first last literal-block">
---
hostname: test2
properties:
  besteffort: &quot;NO&quot;
  cpu: &quot;10&quot;
</pre>
</dd>
</dl>
</td>
</tr>
<tr class="field"><th class="field-name">output:</th><td class="field-body"><p class="first"><em>structure</em>: hash returning the id of the newly created resource and status</p>
<dl class="docutils">
<dt><em>yaml example</em>:</dt>
<dd><pre class="first last literal-block">
---
api_timestamp: 1245946199
id: 32
status: ok
uri: /resources/32
warnings: []
</pre>
</dd>
</dl>
</td>
</tr>
<tr class="field"><th class="field-name">usage example:</th><td class="field-body"><pre class="first last literal-block">
# Adding a new resource with the ruby rest client (oar user only)
irb(main):078:0&gt; r={ 'hostname'=&gt;'test2', 'properties'=&gt; { 'besteffort'=&gt;'NO' , 'cpu' =&gt; '10' } }
irb(main):078:0&gt; puts post('/resources', r.to_json , :content_type =&gt; 'application/json')
</pre>
</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="post-resources-id-state">
<h2><a class="toc-backref" href="#id32">4.24&nbsp;&nbsp;&nbsp;POST /resources/&lt;id&gt;/state</a></h2>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">description:</th><td class="field-body"><p class="first">Change the state</p>
</td>
</tr>
<tr class="field"><th class="field-name">formats:</th><td class="field-body"><p class="first">html , yaml , json</p>
</td>
</tr>
<tr class="field"><th class="field-name">authentication:</th><td class="field-body"><p class="first">oar</p>
</td>
</tr>
<tr class="field"><th class="field-name">input:</th><td class="field-body"><p class="first">A [state] entry is mandatory and must be &quot;Absent&quot;, &quot;Alive&quot; or &quot;Dead&quot;</p>
<p><em>structure</em>: hash of state</p>
<dl class="docutils">
<dt><em>fields</em>:</dt>
<dd><ul class="first last simple">
<li><strong>state</strong>: Alive, Absent or Dead</li>
</ul>
</dd>
<dt><em>yaml example</em>:</dt>
<dd><pre class="first last literal-block">
---
state: Dead
</pre>
</dd>
</dl>
</td>
</tr>
<tr class="field"><th class="field-name">output:</th><td class="field-body"><p class="first"><em>structure</em>:</p>
<dl class="docutils">
<dt><em>yaml example</em>:</dt>
<dd><pre class="first last literal-block">
---
api_timestamp: 1253283492
id: 34
status: Change state request registered
uri: /resources/34
</pre>
</dd>
</dl>
</td>
</tr>
<tr class="field"><th class="field-name">usage example:</th><td class="field-body"><pre class="first last literal-block">
irb
</pre>
</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="delete-resources-id">
<h2><a class="toc-backref" href="#id33">4.25&nbsp;&nbsp;&nbsp;DELETE /resources/&lt;id&gt;</a></h2>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">description:</th><td class="field-body"><p class="first">Delete the resource identified by <em>id</em></p>
</td>
</tr>
<tr class="field"><th class="field-name">formats:</th><td class="field-body"><p class="first">html , yaml , json</p>
</td>
</tr>
<tr class="field"><th class="field-name">authentication:</th><td class="field-body"><p class="first">oar</p>
</td>
</tr>
<tr class="field"><th class="field-name">output:</th><td class="field-body"><p class="first"><em>structure</em>: hash returning the status</p>
<dl class="docutils">
<dt><em>yaml example</em>:</dt>
<dd><pre class="first last literal-block">
---
api_timestamp: 1245946801
status: deleted
</pre>
</dd>
</dl>
</td>
</tr>
<tr class="field"><th class="field-name">usage example:</th><td class="field-body"><pre class="first literal-block">
# Deleting a resource with the ruby rest client
puts delete('/resources/32.yaml')
</pre>
</td>
</tr>
<tr class="field"><th class="field-name">note:</th><td class="field-body"><p class="first last">If the resource could not be deleted, returns a 403 and the reason into the message body.</p>
</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="delete-resources-node-cpuset-id">
<h2><a class="toc-backref" href="#id34">4.26&nbsp;&nbsp;&nbsp;DELETE /resources/&lt;node&gt;/&lt;cpuset_id&gt;</a></h2>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">description:</th><td class="field-body"><p class="first">Delete the resource corresponding to <em>cpuset_id</em> on node <em>node</em>. It is useful when you don't know about the ids, but only the number of cpus on physical nodes.</p>
</td>
</tr>
<tr class="field"><th class="field-name">formats:</th><td class="field-body"><p class="first">html , yaml , json</p>
</td>
</tr>
<tr class="field"><th class="field-name">authentication:</th><td class="field-body"><p class="first">oar</p>
</td>
</tr>
<tr class="field"><th class="field-name">output:</th><td class="field-body"><p class="first"><em>structure</em>: hash returning the status</p>
<dl class="docutils">
<dt><em>yaml example</em>:</dt>
<dd><pre class="first last literal-block">
---
api_timestamp: 1246459253
status: deleted
=&gt; nil
</pre>
</dd>
</dl>
</td>
</tr>
<tr class="field"><th class="field-name">usage example:</th><td class="field-body"><pre class="first literal-block">
# Deleting a resource with the ruby rest client
puts delete('/resources/test/0.yaml')
</pre>
</td>
</tr>
<tr class="field"><th class="field-name">note:</th><td class="field-body"><p class="first last">If the resource could not be deleted, returns a 403 and the reason into the message body.</p>
</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="some-equivalences-with-oar-command-line">
<h1><a class="toc-backref" href="#id35">5&nbsp;&nbsp;&nbsp;Some equivalences with oar command line</a></h1>
<table border="1" class="docutils">
<colgroup>
<col width="45%" />
<col width="55%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head">OAR command</th>
<th class="head">REST request</th>
</tr>
</thead>
<tbody valign="top">
<tr><td>oarstat</td>
<td>GET /jobs.html</td>
</tr>
<tr><td>oarstat -Y</td>
<td>GET /jobs/details.yaml?structure=oar</td>
</tr>
<tr><td>oarstat -Y -fj &lt;id&gt;</td>
<td>GET /jobs/&lt;id&gt;.yaml</td>
</tr>
<tr><td>oardel &lt;id&gt;</td>
<td>DELETE /jobs/&lt;id&gt;.yaml</td>
</tr>
<tr><td>oardel &lt;id&gt; <em>(alternative way)</em></td>
<td>POST /jobs/deletions/&lt;id&gt;/new.yaml</td>
</tr>
<tr><td>oarnodes -Y</td>
<td>GET /resources/full.yaml?structure=oar</td>
</tr>
<tr><td>oarnodes -Y -r1</td>
<td>GET /resources/1.yaml?structure=oar</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="footer">
<hr class="footer" />
<a class="reference external" href="OAR-DOCUMENTATION-API.rst">View document source</a>.
Generated on: 2012-11-16 09:26 UTC.
Generated by <a class="reference external" href="http://docutils.sourceforge.net/">Docutils</a> from <a class="reference external" href="http://docutils.sourceforge.net/rst.html">reStructuredText</a> source.

</div>



</div>





</div>

<div id="footer" class="pagefooter">

<div id="pageinfo">









<div class="pagedate">
Last edited <span class="date">Friday 16 November 2012</span>
<!-- Created <span class="date">Wednesday 29 June 2011</span> -->
</div>

</div>


<!-- from OAR -->
</div>

</div>

</body>
</html>
